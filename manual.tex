% ----------- Author: Radoslav Grenčík, xgrenc00@stud.fit.vutbr.cz ----------- %

\documentclass[a4paper, 11pt]{article}
\usepackage[slovak]{babel}
\usepackage[utf8]{inputenc}
\usepackage[left=2cm, top=3cm, text={17cm, 24cm}]{geometry}
\usepackage{times}
\usepackage{graphicx}
\usepackage{csquotes}
\MakeOuterQuote{"}
\usepackage[hyphens]{url}
\usepackage{hyperref}
\hypersetup{hidelinks}
\usepackage[perpage]{footmisc}
\usepackage{multirow}
\usepackage[normalem]{ulem}
\useunder{\uline}{\ul}{}

\begin{document}

% ---------------------------------------------------------------------------- %
%                                  TITLE PAGE                                  %
% ---------------------------------------------------------------------------- %
\begin{titlepage}
	\begin{center}
		\includegraphics[width=0.77 \linewidth]{FIT_logo.pdf}

		\vspace{\stretch{0.382}}

		\huge{ISA 2020/21 - Projektová dokumentácia} \\
		\LARGE{\textbf{Variant: Discord bot}}

		\vspace{\stretch{0.618}}
	\end{center}
	\begin{minipage}{0.25 \textwidth}
		\begin{flushleft}
			\Large
			\today
		\end{flushleft}
	\end{minipage}
	\hfill
	\begin{minipage}{0.65 \textwidth}
		\begin{flushright}
			\Large
			Radoslav Grenčík, \\
			\large
			\texttt{\href{mailto:xgrenc00@stud.fit.vutbr.cz}{xgrenc00@stud.fit.vutbr.cz}}
		\end{flushright}
	\end{minipage}
\end{titlepage}

% ---------------------------------------------------------------------------- %
%                               TABLE OF CONTENTS                              %
% ---------------------------------------------------------------------------- %
\clearpage
\thispagestyle{empty}
\tableofcontents

% ---------------------------------------------------------------------------- %
% ---------------------------------------------------------------------------- %
% ---------------------------------------------------------------------------- %
\clearpage
\pagenumbering{arabic}
\setcounter{page}{3}

\section{Uvedenie do problematiky}

Cieľom tohto projektu je vytvoriť prenositeľnú konzolovú aplikáciu, ktorá pomocou existujúceho "bot" účtu posiela echo odozvy na všetky správy, ktoré zaznamená v textovom kanáli \texttt{isa-bot}. Spomínaný "bot" účet, musí byť vytvorený na platforme Discord \cite{discord} a musí byť autorizovaný v nejakom servere, ktorý je takisto vytvorený na platforme Discord \cite{discord}. Postup vytvorenia a autorizovania "bot" účtu je popísaný na tejto adrese \cite{creating_a_bot}.

Aplikácia posiela echo odozvy na všetky správy, ktoré nie sú poslané ňou samou, alebo nie sú poslané iným botom (botom sa rozumie užívateľ, ktorého užívateľské meno obsahuje reťazec "bot"). Echo odozvy sú posielané v tvare: \texttt{echo: <username> - <message>}.

% ---------------------------------------------------------------------------- %
% ---------------------------------------------------------------------------- %
% ---------------------------------------------------------------------------- %
\pagebreak
\section{Návrh aplikácie}

Aplikácia je navrhnutá tak, že prostredníctvom protokolu HTTP komunikuje s Discord \cite{discord} API \cite{discord_docs}. Pre komunikáciu s Discord \cite{discord} API \cite{discord_docs} je nutné použiť šifrované SSL spojenie, ktoré je vytvorené pomocou knižnice \textbf{OpenSSL} \cite{OpenSSL_docs}. Komunikácia je realizovaní pomocou knižnice \textbf{BSD sockets} \cite{BSD_sockets}. Aplikácia beží až kým nezachytí signál \texttt{SIGINT} a potom je korektne ukončená.

Aplikácia je navrhnutá tak, aby bola schopná bežať čo najdlhšiu možnú dobu a to vďaka tomu, že je schopná pri prerušení alebo inom násilnom ukončení SSL spojenia toto spojenie automaticky reštartovať a fungovať ďalej bez prerušenia (detaily bližšie popísané v kapitole \ref{3:uvod}.) Aplikácia dokáže takisto fungovať ďalej ak dostane ako odpoveď na HTTP požiadavok chybový kód \texttt{HTTP/1.1 500 Internal Server Error} (detaily v kapitole \ref{3:uvod}).

Podľa zadania projektu nie je špecifikované, v koľkých serveroch vytvorených na platforme Discord \cite{discord} môže byť "bot" účet, na ktorý sa aplikácia pripája,  autorizovaný. Moja aplikácia je teda navrhnutá tak, že akceptuje len také "bot" účty, ktoré sú autorizované presne v jednom Discord \cite{discord} servere.

Podobne je to z textovým kanálom \texttt{isa-bot}. Takisto nie je špecifikované koľko kanálov s týmto menom môže byť vytvorených v jednom Discord \cite{discord} servere. Aplikácia akceptuje servery s presne jedným takto nazvaným kanálom.

\subsection{Použité technológie}

Boli použité štandardné knižnice jazyka C a C++, knižnice pre prácu s funkciami bežne používanými v sieťovom prostredí (ako je netinet/*, sys/*, arpa/*, openssl/* \dots), knižnica \textbf{OpenSSL} \cite{OpenSSL_docs}, knižnica \textbf{BSD sockets} \cite{BSD_sockets}, GNU knižnica \textbf{getopt.h} \cite{getopt} na spracovanie ("dlhých") argumentov, knižnica \textbf{poll.h} \cite{poll_man_page} (detaily v kapitole \ref{3:uvod}) a knižnica \textbf{signal.h} \cite{signal} zachytávanie a spracovanie signálu \texttt{SIGINT}. Ako nástroj pre automatizáciu prekladu bol použitý \textbf{GNU Make} \cite{make}.

% ---------------------------------------------------------------------------- %
% ---------------------------------------------------------------------------- %
% ---------------------------------------------------------------------------- %
\pagebreak
\section{Popis implementácie}
\label{3:uvod}



% ---------------------------------------------------------------------------- %
% ---------------------------------------------------------------------------- %
% ---------------------------------------------------------------------------- %
\pagebreak
\section{Základné informácie o programe}
\label{4:uvod}



% ---------------------------------------------------------------------------- %
% ---------------------------------------------------------------------------- %
% ---------------------------------------------------------------------------- %
\pagebreak
\section{Návod na použitie}

Preloženie programu sa vykoná príkazom \texttt{make}.

Spustenie programu: \texttt{./isabot [-h|--help] [-v|--verbose] -t <access\_token>}

Popis argumentov:

\begin{tabular}{ll}
	\texttt{-h|--help}          & Program vypíše nápovedu na STDOUT a skončí.                                         \\
	\texttt{-t <access\_token>} & Token existujúceho "bot" účtu, na ktorý sa program pripojí.                         \\
	                            & Účet musí byť autorizovaný presne v jednom Discord \cite{discord} servere.          \\
	\texttt{-v|--verbose}       & Program vypíše správy, ktoré zachytil v textovom kanále \texttt{isa-bot}            \\
	                            & (a sú od iných užívateľov, ktorí nemajú reťazec "bot" vo svojom užívateľskom mene), \\
	                            & na STDOUT vo formáte: \texttt{<channel> - <username>: <message>}.
\end{tabular}

Ak nebol použitý žiadny argument, tak program vypíše nápovedu na STDOUT a skončí.

% ---------------------------------------------------------------------------- %
%                                   CITATIONS                                  %
% ---------------------------------------------------------------------------- %
\clearpage
\bibliographystyle{czechiso}
\renewcommand{\refname}{Literatúra}
\bibliography{manual}

\end{document}
